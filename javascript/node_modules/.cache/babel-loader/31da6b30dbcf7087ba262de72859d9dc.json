{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\artem\\\\Desktop\\\\mmc\\\\src\\\\components\\\\Tree\\\\Tree.jsx\",\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { v4 } from 'uuid';\nimport Branch from '../Branch/Branch';\nimport Icon from '../../UI/Icon/Icon';\nimport Modal from '../../UI/Modal/Modal';\nimport '../../styles/List.css';\nimport Button from '../../UI/Button/Button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Tree = () => {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const [nodes, setNodes] = useState([{\n    id: v4(),\n    name: 'mcc-tomsk.de',\n    children: []\n  }]);\n  const [statusUpdateRoot, setStatusUpdateRoot] = useState(false);\n  const [statusUpdateChildren, setStatusUpdateChildren] = useState(false);\n  const [showModal, setShowModal] = useState();\n  const [variant, setVariant] = useState('');\n\n  const addRootToNodes = value => {\n    setNodes([...nodes, {\n      id: v4(),\n      name: value,\n      children: []\n    }]);\n  };\n\n  const deleteRootToNodes = id => {\n    setNodes([...nodes.filter(node => node.id !== id)]);\n  };\n\n  const renameRootToNodes = (id, value) => {\n    setNodes([...nodes.map(node => {\n      if (node.id === id) {\n        return { ...node,\n          name: value\n        };\n      } else {\n        return node;\n      }\n    })]);\n  };\n\n  const addChildrenToRoot = (rootId, value) => {\n    setNodes(nodes => [...nodes.map(node => {\n      if (node.id === rootId) {\n        return { ...node,\n          children: [...node.children, {\n            id: v4(),\n            name: value,\n            children: []\n          }]\n        };\n      } else {\n        return node;\n      }\n    })]);\n    setStatusUpdateChildren(true);\n  };\n\n  const addNodeToChildren = (rootId, childId, value) => {\n    setNodes([...nodes.map(node => {\n      if (node.id === rootId) {\n        return { ...node,\n          children: [...node.children.map(child => {\n            if (child.id === childId) {\n              return { ...child,\n                children: [...child.children, {\n                  id: v4(),\n                  name: value,\n                  children: []\n                }]\n              };\n            } else {\n              return child;\n            }\n          })]\n        };\n      } else {\n        return node;\n      }\n    })]);\n    setStatusUpdateChildren(true);\n  };\n\n  const deleteNodeFromChildren = (rootId, childId) => {\n    setNodes([...nodes.map(node => {\n      if (node.id === rootId) {\n        return { ...node,\n          children: [...node.children.filter(child => child.id !== childId)]\n        };\n      } else {\n        return node;\n      }\n    })]);\n    setStatusUpdateChildren(true);\n  };\n\n  const renameNodeFromChildren = (rootId, childId, value = 'Hello') => {\n    setNodes([...nodes.map(node => {\n      if (node.id === rootId) {\n        return { ...node,\n          children: [...node.children.map(child => {\n            if (child.id === childId) {\n              return { ...child,\n                name: value\n              };\n            } else {\n              return child;\n            }\n          })]\n        };\n      } else {\n        return node;\n      }\n    })]);\n    setStatusUpdateChildren(true);\n  };\n\n  const updateNodeState = (rootId, childrenStateUpdated) => {\n    setNodes([...nodes.map(node => {\n      if (node.id === rootId) {\n        return { ...node,\n          children: childrenStateUpdated\n        };\n      } else {\n        return node;\n      }\n    })]);\n    setStatusUpdateRoot(false);\n  };\n\n  useEffect(() => {\n    setStatusUpdateRoot(true);\n  }, [nodes]);\n\n  const Root = ({\n    id,\n    name,\n    nodes\n  }) => {\n    _s();\n\n    const [showModal, setShowModal] = useState(false);\n    const [variant, setVariant] = useState('');\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"name-node\",\n        children: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Icon, {\n        variant: 'nodes',\n        nodes: nodes\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Icon, {\n        variant: 'create',\n        execute: () => {\n          setVariant('root-create');\n          setShowModal(true);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Icon, {\n        variant: 'rename',\n        execute: () => {\n          setVariant('rename');\n          setShowModal(true);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), showModal && /*#__PURE__*/_jsxDEV(Modal, {\n        variant: variant,\n        rootId: id,\n        rename: renameRootToNodes,\n        name: name,\n        create: addChildrenToRoot,\n        close: () => setShowModal(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this);\n  };\n\n  _s(Root, \"qBswICvTz2C4CxbzLgMTAA+is3w=\");\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [nodes && nodes.map(node => /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: [/*#__PURE__*/_jsxDEV(Root, {\n        id: node.id,\n        name: node.name,\n        nodes: node.children.length\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Branch, {\n        nodeChildren: node.children,\n        id: node.id,\n        updateNodeState: updateNodeState,\n        updateChildrenState: updateNodeState,\n        statusUpdateRoot: statusUpdateRoot,\n        statusUpdateChildren: statusUpdateChildren,\n        setStatusUpdateChildren: () => setStatusUpdateChildren(false),\n        addNodeHandler: addNodeToChildren,\n        deleteNodeHandler: deleteNodeFromChildren,\n        renameNodeHandler: renameNodeFromChildren\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }, this)]\n    }, node.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 11\n    }, this)), showModal && /*#__PURE__*/_jsxDEV(Modal, {\n      variant: variant,\n      close: () => setShowModal(false),\n      create: addRootToNodes,\n      del: deleteRootToNodes,\n      list: nodes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: 'info',\n      execute: () => console.log(nodes),\n      children: \"Console.log(TREE)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: 'secondary',\n      execute: () => {\n        setNodes([{\n          id: v4(),\n          name: 'mcc-tomsk.de',\n          children: []\n        }]);\n      },\n      children: \"Reset tree state\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        setVariant('root-delete');\n        setShowModal(true);\n      },\n      children: \"delete node\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        setVariant('root-create');\n        setShowModal(true);\n      },\n      children: \"add node\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 195,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(Tree, \"n7TMOftrjezLH3128Je2TiP7LDk=\");\n\n_c = Tree;\nexport default Tree;\n\nvar _c;\n\n$RefreshReg$(_c, \"Tree\");","map":{"version":3,"sources":["C:/Users/artem/Desktop/mmc/src/components/Tree/Tree.jsx"],"names":["React","useEffect","useState","v4","Branch","Icon","Modal","Button","Tree","nodes","setNodes","id","name","children","statusUpdateRoot","setStatusUpdateRoot","statusUpdateChildren","setStatusUpdateChildren","showModal","setShowModal","variant","setVariant","addRootToNodes","value","deleteRootToNodes","filter","node","renameRootToNodes","map","addChildrenToRoot","rootId","addNodeToChildren","childId","child","deleteNodeFromChildren","renameNodeFromChildren","updateNodeState","childrenStateUpdated","Root","length","console","log"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { v4 } from 'uuid'\r\nimport Branch from '../Branch/Branch'\r\nimport Icon from '../../UI/Icon/Icon'\r\nimport Modal from '../../UI/Modal/Modal'\r\nimport '../../styles/List.css'\r\nimport Button from '../../UI/Button/Button'\r\n\r\nconst Tree = () => {\r\n  const [nodes, setNodes] = useState([\r\n    {\r\n      id: v4(),\r\n      name: 'mcc-tomsk.de',\r\n      children: [],\r\n    },\r\n  ])\r\n\r\n  const [statusUpdateRoot, setStatusUpdateRoot] = useState(false)\r\n  const [statusUpdateChildren, setStatusUpdateChildren] = useState(false)\r\n  const [showModal, setShowModal] = useState()\r\n  const [variant, setVariant] = useState('')\r\n\r\n  const addRootToNodes = (value) => {\r\n    setNodes([...nodes, { id: v4(), name: value, children: [] }])\r\n  }\r\n\r\n  const deleteRootToNodes = (id) => {\r\n    setNodes([...nodes.filter((node) => node.id !== id)])\r\n  }\r\n\r\n  const renameRootToNodes = (id, value) => {\r\n    setNodes([\r\n      ...nodes.map((node) => {\r\n        if (node.id === id) {\r\n          return { ...node, name: value }\r\n        } else {\r\n          return node\r\n        }\r\n      }),\r\n    ])\r\n  }\r\n\r\n  const addChildrenToRoot = (rootId, value) => {\r\n    setNodes((nodes) => [\r\n      ...nodes.map((node) => {\r\n        if (node.id === rootId) {\r\n          return {\r\n            ...node,\r\n            children: [\r\n              ...node.children,\r\n              { id: v4(), name: value, children: [] },\r\n            ],\r\n          }\r\n        } else {\r\n          return node\r\n        }\r\n      }),\r\n    ])\r\n\r\n    setStatusUpdateChildren(true)\r\n  }\r\n\r\n  const addNodeToChildren = (rootId, childId, value) => {\r\n    setNodes([\r\n      ...nodes.map((node) => {\r\n        if (node.id === rootId) {\r\n          return {\r\n            ...node,\r\n            children: [\r\n              ...node.children.map((child) => {\r\n                if (child.id === childId) {\r\n                  return {\r\n                    ...child,\r\n                    children: [\r\n                      ...child.children,\r\n                      { id: v4(), name: value, children: [] },\r\n                    ],\r\n                  }\r\n                } else {\r\n                  return child\r\n                }\r\n              }),\r\n            ],\r\n          }\r\n        } else {\r\n          return node\r\n        }\r\n      }),\r\n    ])\r\n    setStatusUpdateChildren(true)\r\n  }\r\n\r\n  const deleteNodeFromChildren = (rootId, childId) => {\r\n    setNodes([\r\n      ...nodes.map((node) => {\r\n        if (node.id === rootId) {\r\n          return {\r\n            ...node,\r\n            children: [\r\n              ...node.children.filter((child) => child.id !== childId),\r\n            ],\r\n          }\r\n        } else {\r\n          return node\r\n        }\r\n      }),\r\n    ])\r\n    setStatusUpdateChildren(true)\r\n  }\r\n\r\n  const renameNodeFromChildren = (rootId, childId, value = 'Hello') => {\r\n    setNodes([\r\n      ...nodes.map((node) => {\r\n        if (node.id === rootId) {\r\n          return {\r\n            ...node,\r\n            children: [\r\n              ...node.children.map((child) => {\r\n                if (child.id === childId) {\r\n                  return {\r\n                    ...child,\r\n                    name: value,\r\n                  }\r\n                } else {\r\n                  return child\r\n                }\r\n              }),\r\n            ],\r\n          }\r\n        } else {\r\n          return node\r\n        }\r\n      }),\r\n    ])\r\n    setStatusUpdateChildren(true)\r\n  }\r\n\r\n  const updateNodeState = (rootId, childrenStateUpdated) => {\r\n    setNodes([\r\n      ...nodes.map((node) => {\r\n        if (node.id === rootId) {\r\n          return {\r\n            ...node,\r\n            children: childrenStateUpdated,\r\n          }\r\n        } else {\r\n          return node\r\n        }\r\n      }),\r\n    ])\r\n    setStatusUpdateRoot(false)\r\n  }\r\n\r\n  useEffect(() => {\r\n    setStatusUpdateRoot(true)\r\n  }, [nodes])\r\n\r\n  const Root = ({ id, name, nodes }) => {\r\n    const [showModal, setShowModal] = useState(false)\r\n    const [variant, setVariant] = useState('')\r\n\r\n    return (\r\n      <li>\r\n        <span className=\"name-node\">{name}</span>\r\n        <Icon variant={'nodes'} nodes={nodes} />\r\n        <Icon\r\n          variant={'create'}\r\n          execute={() => {\r\n            setVariant('root-create')\r\n            setShowModal(true)\r\n          }}\r\n        />\r\n        <Icon\r\n          variant={'rename'}\r\n          execute={() => {\r\n            setVariant('rename')\r\n            setShowModal(true)\r\n          }}\r\n        />\r\n        {showModal && (\r\n          <Modal\r\n            variant={variant}\r\n            rootId={id}\r\n            rename={renameRootToNodes}\r\n            name={name}\r\n            create={addChildrenToRoot}\r\n            close={() => setShowModal(false)}\r\n          />\r\n        )}\r\n      </li>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {nodes &&\r\n        nodes.map((node) => (\r\n          <ul key={node.id}>\r\n            <Root id={node.id} name={node.name} nodes={node.children.length} />\r\n\r\n            <Branch\r\n              nodeChildren={node.children}\r\n              id={node.id}\r\n              updateNodeState={updateNodeState}\r\n              updateChildrenState={updateNodeState}\r\n              statusUpdateRoot={statusUpdateRoot}\r\n              statusUpdateChildren={statusUpdateChildren}\r\n              setStatusUpdateChildren={() => setStatusUpdateChildren(false)}\r\n              addNodeHandler={addNodeToChildren}\r\n              deleteNodeHandler={deleteNodeFromChildren}\r\n              renameNodeHandler={renameNodeFromChildren}\r\n            />\r\n          </ul>\r\n        ))}\r\n      {showModal && (\r\n        <Modal\r\n          variant={variant}\r\n          close={() => setShowModal(false)}\r\n          create={addRootToNodes}\r\n          del={deleteRootToNodes}\r\n          list={nodes}\r\n        />\r\n      )}\r\n      <Button variant={'info'} execute={() => console.log(nodes)}>\r\n        Console.log(TREE)\r\n      </Button>\r\n      <Button\r\n        variant={'secondary'}\r\n        execute={() => {\r\n          setNodes([{ id: v4(), name: 'mcc-tomsk.de', children: [] }])\r\n        }}\r\n      >\r\n        Reset tree state\r\n      </Button>\r\n\r\n      <button\r\n        onClick={() => {\r\n          setVariant('root-delete')\r\n          setShowModal(true)\r\n        }}\r\n      >\r\n        delete node\r\n      </button>\r\n      <button\r\n        onClick={() => {\r\n          setVariant('root-create')\r\n          setShowModal(true)\r\n        }}\r\n      >\r\n        add node\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Tree\r\n"]},"metadata":{},"sourceType":"module"}